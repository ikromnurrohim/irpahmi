  {% extends "base/base.html" %}


  {% block contents %}
      <!--main content start-->
      <section id="main-content">
        <section class="wrapper">
          <div class="row">
            <div class="col-lg-12">
              <h3 class="page-header"><i class="fa fa-files-o"></i> Form Iuran Warga</h3>
              <ol class="breadcrumb">
                <li><i class="fa fa-home"></i><a href="index.html">Home</a></li>
                <li><i class="icon_document_alt"></i>Forms</li>
                <li><i class="fa fa-files-o"></i>Form Iuran Warga</li>
              </ol>
            </div>
          </div>
          <!-- Form validations -->
          <div class="row">
            <div class="col-lg-12">
              <section class="panel">
                <header class="panel-heading">
                  Form Iuran Warga
                </header>
                <div class="panel-body">
                  <div class="form">


                    {% if form.errors %}
                      {% for field in form %}
                          {% for error in field.errors %}
                              <div class="alert alert-danger">
                                  <strong>{{ error|escape }}</strong>
                              </div>
                          {% endfor %}
                      {% endfor %}
                      {% for error in form.non_field_errors %}
                          <div class="alert alert-danger">
                              <strong>{{ error|escape }}</strong>
                          </div>
                      {% endfor %}
                    {% endif %}


                  {% if user.is_authenticated %}
                      <form class="form-validate form-horizontal" method="POST" id="iuran_warga" data-iuran-url="{% url 'index:ajax-load-kepala-keluarga' %}">
                      {% csrf_token %}
                      <div class="form-group ">
                        <label for="id_no_kk" class="control-label col-lg-2">No KK</label>
                        <div class="col-lg-4">

                        <select name="no_kk" id="id_no_kk" class="form-control " onchange="autofill()">
                            {% for x,y in form.fields.no_kk.choices %}
                                <option  value="{{x}}" {% if form.fields.id_no_kk.value == x %} selected{% endif %}>
                                {{y}}
                                </option>
                            {% endfor %}
                          </select>

                        </div>
                      </div>

                      <div class="form-group ">
                        <label for="id_kepala_keluarga" class="control-label col-lg-2">Kepala Keluarga</label>
                        <div class="col-lg-4">
                          <input type="text" name="kepala_keluarga" maxlength="25" class="form-control" id="id_kepala_keluarga"  >
                        </div>
                      </div>

                      <div class="form-group ">
                        <label for="id_tahun" class="control-label col-lg-2">Tahun</label>
                        <div class="col-lg-4">
                          <select name="tahun" id="id_tahun" class="form-control">
                            {% for x,y in form.fields.tahun.choices  %}
                            <option value="{{x}}" {% if form.fields.tahun.value == is.selected %} selected
                            {% endif %} >
                            {{y}}
                            </option>
                            {% endfor %}
                          </select>
                        </div>
                      </div>
   
                      <div class="form-group ">
                        <label for="id_januari" class="control-label col-lg-2">Januari</label>
                        <div class="col-lg-4">
                          <input type="text" name="januari" maxlength="15" class="form-control" id="id_januari">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="id_februari" class="control-label col-lg-2">Februari</label>
                        <div class="col-lg-4">
                          <input type="text" name="februari" maxlength="15" class="form-control" id="id_februari">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="id_maret" class="control-label col-lg-2">Maret</label>
                        <div class="col-lg-4">
                          <input type="text" name="maret" maxlength="15" class="form-control" id="id_maret">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="id_april" class="control-label col-lg-2">April</label>
                        <div class="col-lg-4">
                          <input type="text" name="april" maxlength="15" class="form-control" id="id_april">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="id_mei" class="control-label col-lg-2">Mei</label>
                        <div class="col-lg-4">
                          <input type="text" name="mei" maxlength="15" class="form-control" id="id_mei">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="id_juni" class="control-label col-lg-2">Juni</label>
                        <div class="col-lg-4">
                          <input type="text" name="juni" maxlength="15" class="form-control" id="id_juni">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="id_juli" class="control-label col-lg-2">Juli</label>
                        <div class="col-lg-4">
                          <input type="text" name="juli" maxlength="15" class="form-control" id="id_juli">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="id_agustus" class="control-label col-lg-2">Agustus</label>
                        <div class="col-lg-4">
                          <input type="text" name="agustus" maxlength="15" class="form-control" id="id_agustus">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="id_september" class="control-label col-lg-2">September</label>
                        <div class="col-lg-4">
                          <input type="text" name="september" maxlength="15" class="form-control" id="id_september">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="id_oktober" class="control-label col-lg-2">Oktober</label>
                        <div class="col-lg-4">
                          <input type="text" name="oktober" maxlength="15" class="form-control" id="id_oktober">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="id_november" class="control-label col-lg-2">November</label>
                        <div class="col-lg-4">
                          <input type="text" name="november" maxlength="15" class="form-control" id="id_november">
                        </div>
                      </div>
                      <div class="form-group ">
                        <label for="id_desmber" class="control-label col-lg-2">Desember</label>
                        <div class="col-lg-4">
                          <input type="text" name="desember" maxlength="15" class="form-control" id="id_desmber">
                        </div>
                      </div>


                      <div class="form-group">
                        <div class="col-lg-offset-2 col-lg-4">
                          <input class="btn btn-primary" type="submit" value="Save">
                          <a href="/" class="btn btn-default">Back</a>
                        </div>
                      </div>
                    </form>
                  {% else %}
                    Heitsss Anda tidak Boleh hehehe
                  {% endif %}
                    
                  </div>

                </div>
              </section>
            </div>
          </div>
          <!-- page end-->
        </section>
      </section>
      <!--main content end-->

    <script>
    $("#id_no_kk").change(function () {
      var url = $("#iuran_warga").attr("data-iuran-url");  // get the url of the `load_cities` view
      var no_kk = $(this).val();  // get the selected country ID from the HTML input

      $.ajax({                       // initialize an AJAX request
        url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'no_kk': no_kk       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
          // var json = data,
          // console.log(json)
          // obj = JSON.parse(json);
          $("#id_kepala_keluarga").val(data);  // replace the contents of the city input with the data that came from the server
          console.log(data)
        }
      });

    });
  </script>

  {% endblock contents %}